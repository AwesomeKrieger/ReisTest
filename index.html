<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rice Purity Test | Clean Design</title>
    <style>
        :root {
            --background: #ffffff;
            --container-bg: #ffffff;
            --text-color: #000000;
            --border-color: #e5e5e5;
            --accent-blue: #007aff;
            --hover-state: #f9f9f9;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --background: #000000;
                --container-bg: #111111;
                --text-color: #ffffff;
                --border-color: #262626;
                --accent-blue: #0a84ff;
                --hover-state: #1a1a1a;
            }
        }

        body {
            margin: 0;
            background-color: var(--background);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            justify-content: center;
            transition: background-color 0.3s ease;
        }

        .main-wrapper {
            width: 100%;
            max-width: 600px;
            padding: 40px 15px;
        }

        h1 {
            font-size: 2.2rem;
            font-weight: 800;
            text-align: center;
            letter-spacing: -0.5px;
            margin-bottom: 40px;
        }

        .question-container {
            border-top: 1px solid var(--border-color);
        }

        .question-entry {
            display: flex;
            align-items: flex-start;
            padding: 18px 10px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .question-entry:hover {
            background-color: var(--hover-state);
        }

        .box {
            width: 22px;
            height: 22px;
            border: 2px solid var(--border-color);
            border-radius: 5px;
            margin-right: 16px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .selected .box {
            background-color: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .selected .box::after {
            content: "✓";
            color: #ffffff;
            font-size: 14px;
            font-weight: bold;
        }

        .explanation-text {
            font-size: 0.85rem;
            color: #ff453a;
            margin-top: 4px;
            display: block;
            font-weight: 500;
        }

        .finish-button {
            width: 100%;
            padding: 20px;
            background-color: var(--accent-blue);
            color: #ffffff;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 50px;
            transition: opacity 0.2s ease;
        }

        .finish-button:active {
            opacity: 0.8;
        }

        #result-view {
            display: none;
            text-align: center;
            padding: 60px 20px;
        }

        .score-hero {
            font-size: 5.5rem;
            font-weight: 900;
            color: var(--accent-blue);
            margin: 20px 0;
        }

        .reset-link {
            background: none;
            border: none;
            color: var(--text-color);
            text-decoration: underline;
            opacity: 0.5;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="main-wrapper" id="content-screen">
    <h1>Rice Purity Test</h1>

    <div class="question-container" id="quiz-stack"></div>

    <button class="finish-button" onclick="processResults()">Ergebnis berechnen & senden</button>
</div>

<div id="result-view">
    <h2>Dein Score</h2>
    <div class="score-hero" id="final-points"></div>
    <p>Die Auswertung wurde erfolgreich an Google Sheets übertragen.</p>
    <button class="reset-link" onclick="location.reload()">Test neu starten</button>
</div>

<script>
    const SHEET_URL = 'https://script.google.com/macros/s/AKfycbyKchDiaeMXF_uhKUvoloeAJaj-5N5mAypp2AwjPyAWt0Uz8rbZ1nNQJuqT37TMTshd/exec';

    const items = [
        "Romantisch Händchen gehalten?", "Ein Date gehabt?", "In einer Beziehung gewesen?", 
        "Eng getanzt (ohne Platz für 'Jesus')?", "Eine Person geküsst (nicht Familie)?", 
        "Auf den Mund geküsst?", "Einen Zungenkuss gehabt?", "Zungenkuss in der Öffentlichkeit?", 
        "Am Hals geküsst worden?", "Im Liegen geküsst?", "Einen Knutschenfleck gegeben/bekommen?", 
        "An der Brust geküsst oder geküsst worden?", "Jemanden unterhalb der Gürtellinie geküsst?", 
        "Länger als zwei Stunden ununterbrochen geküsst?", "Ein Strip-Spiel gespielt?", 
        "Jemanden sinnlich nackt gesehen oder gesehen worden?", "Masturbiert?", 
        "Zu Pornos masturbiert?", "Masturbiert, während jemand im Raum war?", 
        "Beim Masturbieren erwischt worden?", "Masturbiert mit einem Gegenstand?", 
        "Pornos konsumiert?", "Sinnlich massiert oder massiert worden?", "Petting in voller Kleidung?", 
        "Ausgezogen worden oder jemanden ausgezogen?", "Zusammen geduscht?", 
        "Hintern begrapscht?", "Brüste begrapscht?", "Genitalien begrapscht?", 
        "Jemanden sexuell erregt ohne Befriedigung (Blue Balls)?", "Einen Orgasmus durch eine andere Person gehabt?", 
        "Sex-SMS verschickt?", "Sex-Fotos verschickt oder erhalten?", "Sex über Video-Chat?", 
        "Einen Partner betrogen?", "Verhütungsmittel gekauft?", "Oralverkehr gegeben?", 
        "Oralverkehr erhalten?", "Genitalsekret geschluckt?", "Sexspielzeug mit Partner benutzt?", 
        "Nacht bei jemandem vom bevorzugten Geschlecht verbracht?", "Bei Sex erwischt worden?", 
        "Mitbewohner für Sex rausgeworfen?", "Alkohol getrunken?", "Trinkspiel gespielt?", 
        "Betrunken gewesen?", "Nüchternheit vorgetäuscht?", "Filmriss gehabt?", 
        "Tabak konsumiert?", "Marihuana konsumiert?", "Härtere Drogen als Marihuana?", 
        "Meth, Crack, PCP oder Heroin?", "Wegen Verstoß zum Rektor geschickt?", 
        "Suspendiert worden?", "In der Öffentlichkeit uriniert?", "Nacktbaden gewesen?", 
        "Nackt durch die Öffentlichkeit gerannt?", "Einen Stripper gesehen?", 
        "Polizei wegen dir gerufen?", "Vor Polizei weggelaufen?", "Von Polizei verhört?", 
        "Handschellen getragen?", "Verhaftet worden?", "Wegen Verbrechen verurteilt?", 
        "Wegen schwerer Straftat verurteilt?", "Vandalismus begangen?", "Geschlechtsverkehr gehabt?", 
        "3+ Mal Sex in einer Nacht?", "Schon mal eine Nummer geschoben?", "10+ Mal Sex gehabt?", 
        "4+ Stellungen probiert?", "Sex mit einem Fremden?", "Sex im Auto?", "Sex im Freien?", 
        "Sex in der Öffentlichkeit?", "Sex im Pool/Whirlpool?", "Sex in fremdem Bett?", 
        "Sex im Haus der Eltern?", "Dritte Person im Raum bei Sex?", "Mile High Club?", 
        "Booty Call gehabt?", "160km für Sex gereist?", "3+ Jahre Altersunterschied?", 
        "Sex mit einer Jungfrau?", "Sex ohne Kondom?", "STI-Test wegen Verdacht?", 
        "Geschlechtskrankheit gehabt?", "Einen Dreier gehabt?", "An einer Orgie teilgenommen?", 
        "2 Personen in 24h gehabt?", "Sex mit 5+ Partnern?", "Beim Sex gefilmt worden?", 
        "Sex während der Periode?", "Analsex gehabt?", "Schwangerschafts-Angst?", 
        "Schwanger geworden/jemanden geschwängert?", "Für Sex bezahlt oder bezahlt worden?", 
        "Voyeurismus begangen?", "Inzest begangen?", "Sodomie begangen?"
    ];

    const container = document.getElementById('quiz-stack');
    items.forEach((text, index) => {
        const div = document.createElement('div');
        div.className = 'question-entry';
        let note = (text.includes("Sodomie")) ? '<span class="explanation-text">Hinweis: Sexuelle Handlungen mit Tieren.</span>' : '';
        div.innerHTML = `<div class="box"></div><div>${index + 1}. ${text}${note}</div>`;
        div.onclick = () => div.classList.toggle('selected');
        container.appendChild(div);
    });

    async function processResults() {
        const checkedRows = document.querySelectorAll('.question-entry.selected');
        const calculatedScore = 100 - checkedRows.length;
        const loggedAnswers = Array.from(checkedRows).map(row => row.innerText.split('\n')[0]);

        document.getElementById('content-screen').style.display = 'none';
        document.getElementById('final-points').innerText = calculatedScore;
        document.getElementById('result-view').style.display = 'block';
        window.scrollTo(0,0);

        const dataPackage = {
            name: "Anonym",
            score: calculatedScore,
            answers: loggedAnswers
        };

        try {
            await fetch(SHEET_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(dataPackage)
            });
        } catch (err) {
            console.error("Übertragungsfehler:", err);
        }
    }
</script>

</body>
</html>
